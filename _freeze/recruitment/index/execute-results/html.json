{
  "hash": "0273799f8b02fd83a0172bc1d2997f6f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Recruitment\"\nformat: html\nexecute: \n  echo: false  \n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfile_info <- file.info(\"data/recruitment_data.csv\")\nrecruitment_data <- read.csv(\"data/recruitment_data.csv\")\n\nrandom_data <- recruitment_data |> \n  select(random_date) |> \n  mutate(random_date = as_date(random_date))  |> \n  arrange(random_date) |> \n  mutate(n = row_number(),\n         group = \"Random selection for invitation to the trial\") #random selection\n\nuptake_data <- recruitment_data  |> \n  mutate(icf_date = as_date(icddate)) |> \n  filter(!is.na(icf_date) & icf_reg == 1)  |> \n  select(icf_date) |> \n  arrange(icf_date) |> \n  mutate(n = row_number(),\n         group = \"Informed consent signed\")\n\n# plot <- ggplot() +\n#   #graphing random selection\n#   geom_point(data = random_data, aes(x = random_date, y = n, color = group)) +\n#   geom_line(data = random_data, aes(x = random_date, y = n, color = group)) +\n#   geom_area(data = random_data, aes(x = random_date, y = n, fill = group), alpha = 0.1) +\n#   #graphing uptake\n#   geom_point(data = uptake_data, aes(x = icf_date, y = n, color = group)) +\n#   geom_line(data = uptake_data, aes(x = icf_date, y = n, color = group)) +\n#   geom_area(data = uptake_data, aes(x = icf_date, y = n, fill = group), alpha = 0.5) +\n#   geom_hline(yintercept = 150, linetype = \"solid\", color = custom_palette[1], linewidth = 1) +\n#   #style\n#   scale_x_date(date_breaks = \"3 months\", date_labels =  \"%b %Y\", limits = c(as.Date(\"2024-04-29\"), as.Date(\"2025-10-31\"))) +\n#   scale_y_continuous(limits = c(0, 160), \n#                     breaks = c(0, 50, 100, 150),  # All the labels we want\n#                     minor_breaks = seq(0, 150, 25),  # Minor gridlines stopping at 140\n#                     labels = c(\"0\", \"50\", \"100\", \"150\")) +\n#   ylab(\"number of patients\") +\n#   xlab(\"\") +\n#   guides(color = guide_legend(title = NULL), fill = guide_legend(title = NULL)) +\n#   annotate(\"rect\", \n#            xmin = as.Date(\"2024-05-30\"), xmax = as.Date(\"2024-12-01\"),\n#            ymin = 145, ymax = 155, \n#            fill = \"white\") +\n#   annotate(\"text\", x = as.Date(\"2024-08-30\"), \n#            y = 150, label = \"target of consented patients\", \n#            color = custom_palette[1], size = 5, \n#            hjust = 0.5, vjust = 0.3) +\n#   theme_minimal() +\n#   theme(\n#     panel.grid.minor.y = element_line(color = \"gray95\"),\n#     panel.grid.major.y = element_line(color = \"gray80\"),\n#     legend.position = \"bottom\",\n#     panel.grid.minor = element_blank()\n#   )\n# \n# # Create the plot\n# custom_colors <- c(\"#000000\", \"#068194\")  # Black for random, Blue for uptake\n\nplot <- plot_ly() %>%\n  # Random selection traces\n  add_trace(\n    data = random_data,\n    x = ~random_date,\n    y = ~n,\n    type = 'scatter',\n    mode = 'lines+markers',\n    name = ~group,\n    line = list(color = '#000000'),\n    marker = list(color = '#000000'),\n    fillcolor = 'rgba(0, 0, 0, 0.1)',\n    fill = 'tonexty'\n  ) %>%\n  \n  # Uptake traces\n  add_trace(\n    data = uptake_data,\n    x = ~icf_date,\n    y = ~n,\n    type = 'scatter',\n    mode = 'lines+markers',\n    name = ~paste(group, \"(Uptake)\"),\n    line = list(color = '#068194'),\n    marker = list(color = '#068194'),\n    fillcolor = 'rgba(6, 129, 148, 0.5)',\n    fill = 'tozeroy'\n  ) %>%\n  \n  # Layout configurations\n  layout(\n    shapes = list(\n      list(\n        type = \"line\",\n        y0 = 150,\n        y1 = 150,\n        x0 = 0,\n        x1 = 1,\n        xref = \"paper\",\n        line = list(color = '#068194', dash = 'dash')\n      )\n    ),\n    annotations = list(\n      list(\n        x = 0.5,  # Position at right end of plot\n        y = 145,\n        xref = \"paper\",\n        text = \"recruitment target\",\n        showarrow = FALSE,\n        xanchor = \"middle\", \n        font = list(color = '#068194',\n                    size = 19)\n      )\n    ),\n    xaxis = list(\n      title = \"\",\n      tickformat = \"%b %Y\",\n      dtick = \"M3\" # 3-month intervals\n    ),\n    yaxis = list(\n      title = \"number of patients\",\n      range = c(0, 160),\n      tickvals = c(0, 50, 100, 150),\n      ticktext = c(\"0\", \"50\", \"100\", \"150\"),\n      gridcolor = \"gray80\",\n      minorgridcolor = \"gray95\",\n      minorgridcount = 5  # This will create minor gridlines at 25-unit intervals\n    ),\n    showlegend = TRUE,\n    legend = list(\n      orientation = \"h\",\n      xanchor = \"center\",\n      x = 0.5,\n      y = -0.2\n    ),\n    # Use a clean white theme similar to theme_minimal\n    plot_bgcolor = \"white\",\n    paper_bgcolor = \"white\"\n  )\n\nplot\n```\n\n::: {#fig-1 .cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-860af23ed3861862484b\" style=\"width:100%;height:520px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-860af23ed3861862484b\">{\"x\":{\"visdat\":{\"45804bcd3d5f\":[\"function () \",\"plotlyVisDat\"],\"45805af73bf9\":[\"function () \",\"data\"],\"458079823569\":[\"function () \",\"data\"]},\"cur_data\":\"458079823569\",\"attrs\":{\"45805af73bf9\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":{},\"y\":{},\"type\":\"scatter\",\"mode\":\"lines+markers\",\"name\":{},\"line\":{\"color\":\"#000000\"},\"marker\":{\"color\":\"#000000\"},\"fillcolor\":\"rgba(0, 0, 0, 0.1)\",\"fill\":\"tonexty\",\"inherit\":true},\"458079823569\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":{},\"y\":{},\"type\":\"scatter\",\"mode\":\"lines+markers\",\"name\":{},\"line\":{\"color\":\"#068194\"},\"marker\":{\"color\":\"#068194\"},\"fillcolor\":\"rgba(6, 129, 148, 0.5)\",\"fill\":\"tozeroy\",\"inherit\":true}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"shapes\":[{\"type\":\"line\",\"y0\":150,\"y1\":150,\"x0\":0,\"x1\":1,\"xref\":\"paper\",\"line\":{\"color\":\"#068194\",\"dash\":\"dash\"}}],\"annotations\":[{\"x\":0.5,\"y\":145,\"xref\":\"paper\",\"text\":\"recruitment target\",\"showarrow\":false,\"xanchor\":\"middle\",\"font\":{\"color\":\"#068194\",\"size\":19}}],\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"\",\"tickformat\":\"%b %Y\",\"dtick\":\"M3\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"number of patients\",\"range\":[0,160],\"tickvals\":[0,50,100,150],\"ticktext\":[\"0\",\"50\",\"100\",\"150\"],\"gridcolor\":\"gray80\",\"minorgridcolor\":\"gray95\",\"minorgridcount\":5},\"showlegend\":true,\"legend\":{\"orientation\":\"h\",\"xanchor\":\"center\",\"x\":0.5,\"y\":-0.20000000000000001},\"plot_bgcolor\":\"white\",\"paper_bgcolor\":\"white\",\"hovermode\":\"closest\"},\"source\":\"A\",\"config\":{\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"data\":[{\"fillcolor\":\"rgba(0, 0, 0, 0.1)\",\"x\":[\"2024-04-29\",\"2024-05-02\",\"2024-05-03\",\"2024-05-03\",\"2024-05-08\",\"2024-05-13\",\"2024-05-14\",\"2024-05-17\",\"2024-05-23\",\"2024-05-24\",\"2024-05-24\",\"2024-05-24\",\"2024-05-31\",\"2024-05-31\",\"2024-06-06\",\"2024-06-07\",\"2024-06-12\",\"2024-06-12\",\"2024-06-14\",\"2024-06-14\",\"2024-06-21\",\"2024-06-21\",\"2024-06-21\",\"2024-06-28\",\"2024-07-05\",\"2024-07-08\",\"2024-07-11\",\"2024-07-12\",\"2024-07-12\",\"2024-07-18\",\"2024-07-23\",\"2024-07-25\",\"2024-07-26\",\"2024-07-30\",\"2024-08-02\",\"2024-08-12\",\"2024-08-15\",\"2024-08-15\",\"2024-08-23\",\"2024-08-26\",\"2024-08-29\",\"2024-08-29\",\"2024-08-29\",\"2024-08-30\",\"2024-09-10\",\"2024-09-11\",\"2024-09-12\",\"2024-09-12\",\"2024-09-20\",\"2024-09-20\",\"2024-09-20\",\"2024-09-24\",\"2024-10-01\",\"2024-10-11\",\"2024-10-14\",\"2024-10-15\",\"2024-10-18\",\"2024-10-21\",\"2024-10-21\",\"2024-10-24\",\"2024-10-29\",\"2024-11-01\",\"2024-11-01\",\"2024-11-01\",\"2024-11-01\",\"2024-11-08\",\"2024-11-08\",\"2024-11-11\",\"2024-11-15\",\"2024-11-21\",\"2024-11-26\",\"2024-11-28\",\"2024-11-29\",\"2024-12-02\",\"2024-12-12\",\"2024-12-13\",\"2024-12-20\",\"2024-12-20\",\"2024-12-30\",\"2024-12-30\"],\"y\":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80],\"type\":\"scatter\",\"mode\":\"lines+markers\",\"name\":\"Random selection for invitation to the trial\",\"line\":{\"color\":\"#000000\"},\"marker\":{\"color\":\"#000000\",\"line\":{\"color\":\"rgba(31,119,180,1)\"}},\"fill\":\"tonexty\",\"error_y\":{\"color\":\"rgba(31,119,180,1)\"},\"error_x\":{\"color\":\"rgba(31,119,180,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"fillcolor\":\"rgba(6, 129, 148, 0.5)\",\"x\":[\"2024-05-02\",\"2024-05-03\",\"2024-05-06\",\"2024-05-14\",\"2024-05-21\",\"2024-05-23\",\"2024-05-27\",\"2024-05-28\",\"2024-05-31\",\"2024-06-04\",\"2024-06-10\",\"2024-06-17\",\"2024-06-21\",\"2024-06-26\",\"2024-06-28\",\"2024-06-28\",\"2024-07-01\",\"2024-07-05\",\"2024-07-05\",\"2024-07-11\",\"2024-07-12\",\"2024-07-16\",\"2024-07-18\",\"2024-07-23\",\"2024-07-26\",\"2024-07-30\",\"2024-08-06\",\"2024-08-07\",\"2024-08-12\",\"2024-08-20\",\"2024-08-26\",\"2024-08-27\",\"2024-09-02\",\"2024-09-02\",\"2024-09-03\",\"2024-09-05\",\"2024-09-10\",\"2024-09-11\",\"2024-09-20\",\"2024-09-23\",\"2024-09-23\",\"2024-09-26\",\"2024-10-09\",\"2024-10-11\",\"2024-10-14\",\"2024-10-15\",\"2024-10-21\",\"2024-10-21\",\"2024-10-23\",\"2024-10-30\",\"2024-11-05\",\"2024-11-08\",\"2024-11-13\",\"2024-11-13\",\"2024-11-18\",\"2024-11-18\",\"2024-11-19\",\"2024-11-26\",\"2024-11-28\",\"2024-12-02\",\"2024-12-13\",\"2024-12-20\",\"2024-12-24\",\"2024-12-30\"],\"y\":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64],\"type\":\"scatter\",\"mode\":\"lines+markers\",\"name\":\"Informed consent signed (Uptake)\",\"line\":{\"color\":\"#068194\"},\"marker\":{\"color\":\"#068194\",\"line\":{\"color\":\"rgba(255,127,14,1)\"}},\"fill\":\"tozeroy\",\"error_y\":{\"color\":\"rgba(255,127,14,1)\"},\"error_x\":{\"color\":\"rgba(255,127,14,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n\nRecruitment\n:::\n:::\n\n\n\n\nEligible patients at the Division of Medical Oncology at the University Hospital Basel are randomly invited to participate in the LIQPLAT trial. We aim to recruit 150 participants within 18 months. As of 2025-01-02, 64 patients have agreed to participate in the trial.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../site_libs/plotly-binding-4.10.4/plotly.js\"></script>\n<script src=\"../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}